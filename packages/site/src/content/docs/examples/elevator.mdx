---
title: Elevator
description: An elevator (aka lift) state-machine, capable of operating standalone or as part of a coordinated group
sidebar:
  order: 9
---

ğŸ·ï¸ `state data`\
ğŸ·ï¸ `copy data on transition`\
ğŸ·ï¸ `conditional transitions`\
ğŸ·ï¸ `immediate (always) transitions`\
ğŸ·ï¸ `delayed transition`\
ğŸ·ï¸ `state entry side-effect`\
ğŸ·ï¸ `send event to self`

## About

This example models an elevator (aka lift). This model operates completely standalone, but can also be combined into a group of coordinated elevators with the [elevators controller](/examples/elevators-controller/).

The elevator machine's state says where it is now and where it's going, plus it has a queue of floors to visit next (if any). When a `VISIT_FLOOR` event is received (either by summoning it at the wall, or a passenger pressing a button inside), the elevator either opens the doors (if already at the floor), else adds the floor to its queue.

State `onEntry()` side-effects use `setTimeout()` to send events to the machine to simulate 5s to open/close doors. Similarly up/down travel progress is simulated by moving 1/10th of a floor every 500ms, meaning it takes 5s to go up/down one floor.

This machine's state data is homogenous and we're using `enableCopyDataOnTransition` to simplify some transitions that don't update the data.

# Definition

import { Aside, Code } from "@astrojs/starlight/components";

{<Aside type="tip">
View this and other example's <a href="https://github.com/maurice/yay-machine/blob/main/packages/example-machines/src/elevator/elevatorMachine.ts" target="_blank">source</a> and <a href="https://github.com/maurice/yay-machine/blob/main/packages/example-machines/src/elevator/__tests__/elevatorMachine.test.ts" target="_blank">test</a> on GitHub

</Aside>}

import elevatorMachine from "@yay-machine/example-machines/src/elevator/elevatorMachine.ts?raw";
import elevatorMachineUsage from "@yay-machine/example-machines/src/elevator/elevatorMachineUsage.ts?raw";

<Code code={elevatorMachine} lang="typescript" title="elevatorMachine.ts" />

## Usage

<Code code={elevatorMachineUsage} lang="typescript" />
